<html>
<head>
<style>
	#draggable { width: 150px; height: 150px; padding: 0.5em; }

#follower {
  position:absolute;
  background-color:#abc;
  left:50px;
  width:90px;
  height:90px;
  margin:5px;
}
  
	</style>
  
</head>
<body>
<div class="demo">

<div id="draggable" class="ui-widget-content">
	<p>Drag me around</p>
</div>

</div><!-- End demo -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' ></script>
<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js' ></script>
  

<script src="http://127.0.0.1:8124/socketio.js"></script> 
<script> 
 var rid = Math.floor(Math.random()*999);
 var socket = new io.Socket(); 
 socket.connect();
 socket.on('connect', function(){ console.log('connect') }) 
 socket.on('message', function(mess){

  console.log(mess);
  if (rid !== mess.rid)
  {
    $( "#" + mess.id ).animate({ 'top': mess.top, 'left': mess.left }, 'fast');
  }
}) 
 socket.on('disconnect', function(){ console.log('disconnect') }) 
</script> 

	<script>
$( "#draggable" ).draggable({
   drag: function(event, ui) {
    info = {};
    info.id = 'draggable';
    info.top = ui.position.top;
    info.left = ui.position.left;
    info.rid = rid;
    socket.send(info);
  }
});
	</script>

</body>
</html>
